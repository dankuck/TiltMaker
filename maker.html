<html>
<body>

    <button id="step">Step</button>
    <button id="run">Run</button>
    
    <pre id="board">
    </pre>

    <script type="text/javascript" src="maker.js"></script>
    <script type="text/javascript">

    var mode = "RANDOM";
    var board;
    if (mode == 'RANDOM') {
      board = generateRandomBoard();
    } else if (mode == 'EASY TEST') {
      board = new Board([
        new Piece(GREEN, 0, 0),
        new Piece(BLOCK, 3, 0),
        new Piece(HOLE, 2, 2)
      ]);
    } else if (mode == 'REDUNDANCY TEST') {
      board = new Board([
        new Piece(GREEN, 1, 2),
        new Piece(HOLE, 2, 2),
        new Piece(BLOCK, 2, 3),
        new Piece(BLOCK, 4, 3)
      ]);
    } else if (mode == 'TRAP') {
      board = new Board([
        new Piece(GREEN, 0, 0),
        new Piece(HOLE, 2, 2),
        new Piece(BLOCK, 0, 1),
        new Piece(BLOCK, 4, 1)
      ]);
    } else if (mode == 'EMPTY') {
      board = new Board([
      ]);
    }
    var walker = new BoardWalker(board);
    function show () {
      var str = "== UNIQUE SOLUTIONS (" + walker.solutions.length + ")\n\n";
      for (var i = 0; i < walker.solutions.length; i++) {
        str += walker.solutions[i].toPathString() + "\n\n";
      }
      str += "== ACTIVE (" + walker.active.length + ")\n\n";
      for (var i = 0; i < walker.active.length; i++) {
        str += walker.active[i].toPathString() + "\n\n";
      }
      str += "== FAILURES (" + walker.failures.length + ")\n\n";
      for (var i = 0; i < walker.failures.length; i++) {
        str += walker.failures[i].toPathString() + "\n\n";
      }
      str += "== CIRCLES (" + walker.circles.length + ")\n\n";
      for (var i = 0; i < walker.circles.length; i++) {
        str += walker.circles[i].toPathString() + "\n\n";
      }
      str += "== THE LONG WAY (" + walker.shortCircuited.length + ")\n\n";
      for (var i = 0; i < walker.shortCircuited.length; i++) {
        str += walker.shortCircuited[i].toPathString() + "\n\n";
      }
      if (walker.active.length == 0) {
        str += "DONE\n\n";
      }
      document.getElementById("board").innerHTML = str;
    }

    show();
    function doStep() {
      walker.step();
      show();
    }

    document.getElementById('step').onclick = doStep;
    
    </script>
</body>
</html>
